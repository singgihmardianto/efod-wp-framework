(()=>{"use strict";const e=(e,t)=>{var i=()=>{var i;let a=e(".ef-cpt-meta-img-galleries__add_btn"),l=e(".ef-cpt-meta-img-galleries__list"),n=e(".ef-cpt-meta-img-galleries__input_hidden"),s=null!==(i=n.val()?.split(","))&&void 0!==i?i:"";l.sortable({cursor:"-webkit-grabbing",stop:function(t,i){i.item.removeAttr("style");let a=new Array;const l=e(this);l.find("li").each((function(t){a.push(e(this).attr("data-id"))})),l.parent().next().val(a.join())}}),a.click((i=>{i.preventDefault();const a=t.media({title:"Insert images",library:{type:"image"},button:{text:"Use these images"},multiple:!0});a.on("select",(function(){let t=a.state().get("selection").map((e=>(e.toJSON(),e)));s=[],e(".ef-cpt-meta-img-galleries__list").html(""),t.map((t=>{e(".ef-cpt-meta-img-galleries__list").append('<li data-id="'+t.id+'"><span style="background-image:url('+t.attributes.url+')"></span></li>'),s.push(t.id)})),e(".ef-cpt-meta-img-galleries__list").sortable("refresh"),e(".ef-cpt-meta-img-galleries__input_hidden").val(s.join())})),a.on("open",(function(){var i=a.state().get("selection");n=e(".ef-cpt-meta-img-galleries__input_hidden"),s=n.val().split(","),s.forEach((function(e){var a=t.media.attachment(e);a.fetch(),a&&i.add([a])}))})),a.open()}))};return{run:()=>{i()}}};!function(t,i){e(t,i).run()}(jQuery,wp)})();