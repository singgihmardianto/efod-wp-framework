(()=>{"use strict";const t=(t,e)=>{const i=()=>{var i;const a=t(".ef-cpt-meta-img-galleries__add_btn"),n=t(".ef-cpt-meta-img-galleries__list");let s=t(".ef-cpt-meta-img-galleries__input_hidden"),l=null!==(i=s.val()?.split(","))&&void 0!==i?i:"";n.sortable({cursor:"-webkit-grabbing",stop(e,i){i.item.removeAttr("style");const a=new Array,n=t(this);n.find("li").each((()=>{a.push(t(this).attr("data-id"))})),n.parent().next().val(a.join())}}),a.click((i=>{i.preventDefault();const a="true"===t(i.target).attr("data-attr-is-single"),n=t(i.target).siblings(".ef-cpt-meta-img-galleries__list"),r=t(i.target).siblings(".ef-cpt-meta-img-galleries__input_hidden"),c=e.media({title:"Insert images",library:{type:"image"},button:{text:"Use these images"},multiple:!a});c.on("select",(function(){const t=c.state().get("selection").map((t=>(t.toJSON(),t)));l=[],n.html(""),t.forEach((t=>{n.append('<li data-id="'+t.id+'"><span style="background-image:url('+t.attributes.url+')"></span></li>'),l.push(t.id)})),n.sortable("refresh"),r.val(l.join())})),c.on("open",(function(){const i=c.state().get("selection");s=t(".ef-cpt-meta-img-galleries__input_hidden"),l=s.val().split(","),l.forEach((function(t){const a=e.media.attachment(t);a.fetch(),a&&i.add([a])}))})),c.open()}))};return{run:()=>{i()}}};!function(e,i){t(e,i).run()}(jQuery,wp)})();